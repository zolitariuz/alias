(function(e){"use strict";e(function(){function s(t){return e.post(ajax_url,{email:t,action:"save_newsletter_email"},"json")}function o(t){return e.post(ajax_url,{product_id:t,action:"add_product_to_shopping_cart"},"json")}function u(t){var n=e("#carrito-total"),r=parseInt(n.text(),10),i=r+t;n.text(i);return i}window.validateEmail=function(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)};window.isNumber=function(e){return!isNaN(parseInt(e,10))};var t=e(".main.libros");t.imagesLoaded(function(){t.isotope({animationEngine:"jquery"});e(document).trigger("isotopeDone")});e(".colecciones_menu a").on("click",function(){var n=e(this).attr("data-filter");t.isotope({filter:n});n.charAt(0)==="#"?window.location.hash=e(this).attr("href"):window.location=e(this).attr("href");return!1});e(document).ready(function(){var t=window.location.hash;e(".colecciones_menu a").filter(function(n,r){return e(r).attr("href")==t}).addClass("active")});e(document).live("isotopeDone",function(){var t=window.location.hash;if(t.charAt(0)=="#"){var n=t.replace("#",".");e(".main.libros").isotope({filter:n})}});var n;setTimeout(function(){var t=e(".main").height();t>200&&e(".sidebar").height(t)},100);var r=e(window).height(),i=e(".header").height(),n=r-(i+170);e(".main").css("min-height",n);e("form#form_buscador").on("click",function(){e(this).css({"background-color":"black"});e(this).find("input").css({"background-color":"black",color:"white"});e(this).find("#submit").css({"background-position":"0px -13px"})});e("form#forma_contacto").on("submit",function(t){t.preventDefault();var n=e(this).serialize();console.log(ajax_url+"/?"+n);e.post(ajax_url+"/?"+n,{action:"formulario_contacto_enviado"},"json").done(function(e){alert("Se envio el formulario de contacto")})});e(".colecciones_menu a").on("click",function(){e(".colecciones_menu a").removeClass("active");e(this).addClass("active")});e(".newsletter").on("click",function(){e(this).css({"background-color":"black"});e(this).find("p").hide();e(this).find(".newsletter_img").css({"background-position":"-14px -11px"});e(this).find(".form_newsletter").show();e(".form_newsletter_input").focus()});e("body").on("click",function(t){if(!e(t.target).hasClass("s")){var n=e("#form_buscador");e(n).css({"background-color":"white"});e(n).find("input").css({"background-color":"white",color:"black"});e(n).find("#submit").css({"background-position":"0px 0px"})}if(!e(t.target).hasClass("newsletter")){var r=e(".newsletter");e(r).css({"background-color":"white"});e(r).find("p").show();e(r).find(".newsletter_img").css({"background-position":"-14px 2px"});e(r).find(".form_newsletter").hide()}});e("form.form_newsletter").on("submit",function(t){t.preventDefault();var n=e(".form_newsletter_input").val();if(validateEmail(n)){var r=s(n);r.done(function(t){e(".form_newsletter_input").val("");alert("Gracias, se guardo correctamente tu direccion de correo")})}else alert("Porfavor ingresa una direccion de correo valida")});e("button#add_to_cart").on("click",function(t){t.preventDefault();var n=e(this).data("post_id"),r=o(n);r.done(function(e){if(isNumber(e.data)){alert("Agregaste a tu carrito 1 libro");u(parseInt(e.data,10))}})});e("button#buy_now").on("click",function(){var t=e(this).data("post_id"),n=o(t);n.done(function(e){isNumber(e.data)&&(window.location.href=site_url+"/carrito-de-compra/?lang="+language)})});e(".select-currency").on("change",function(){var t=e(this).val();e(".select-currency").each(function(n,r){e("option",this).filter(function(n,r){return e(r).val()===t}).prop("selected",!0)});e(".select-currency").trigger("chosen:updated")});e("button#comprar").on("click",function(){var t=e(".select-currency :selected").data("lc"),n=e(".select-currency :selected").val(),r=e("#pais").val(),i=e("#estado").val(),s=e("#codigo_postal").val(),o=PayPal.init({lc:t,currency_code:n,custom:{pais:r,estado:i,cp:s}});o.done(function(){PayPal.submit()})});e(document).ready(function(){e("#pais").lenght>0&&e("#pais").chosen();e("#estado").lenght>0&&e("#estado").chosen();e(".currency").lenght>0&&e(".currency").chosen()})})})(jQuery);